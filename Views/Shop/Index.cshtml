@model IEnumerable<CapstoneWine.Models.WinesModel>
@using System.Net;

<link rel="stylesheet" href="~/css/shop.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

@{
	ViewData["Title"] = "Shop";
}

@{
	var categories = ViewData["Categories"] as string[];
	var types = ViewData["Types"] as string[];
}

<section class="filter-popout">
	<a class="toggler">Filters</a>

	<!--Search by wine name-->
	<div class="filters-box">
		<form method="get" action="/Shop/Product">
			<div class="search-bar">
				<td>
					<input class="form-control" type="text" placeholder="Search wine name" name="SearchString" value="@ViewData["CurrentFilter"]" aria-label="Search" aria-describedby="btnSearch" />
					<input type="submit" value="Search" class="btn btn-primary" />
				</td>
			</div>


		</form>
	</div>


	<!--Filter by category-->
	<div class="filters-box">
		<h3>Filter by category</h3>
		<ul>
			@foreach (var category in categories)
			{
				ViewData["CurrentFilter"] = category;
				<li><a class="filters" href="/Shop/Category/?categoryFilter=@ViewData["CurrentFilter"]">@category</a></li>
			}
		</ul>

	</div>

	<!--Filter by type-->
	<div class="filters-box">
		<h3>Filter by type</h3>
		<ul>
			@foreach (var type in types)
			{
				ViewData["CurrentFilter"] = type;
				<li><a class="filters" href="/Shop/Type/?typeFilter=@ViewData["CurrentFilter"]">@type</a></li>
			}
		</ul>

	</div>
</section>

@foreach (var category in categories)
{
	<h2 class="text-center">@category.ToUpper()</h2>
	<section>
		<div class="category-row">
			<a class="slide-button" id="prv"><i class="material-icons">keyboard_arrow_left</i></a>
			<div id="container">
				<ul id="slider">
					@foreach (var item in Model.Where(item => item.Category == category))
					{
						<li>
							<div class="product-box">
								<img class="img" src="@Html.DisplayFor(modelItem => item.Image)" />
								<div class="price h5">$@Html.DisplayFor(modelItem => item.Price)</div>
								<div class="quantity">@Html.DisplayFor(modelItem => item.Quantity)</div>
								<a class="cart" asp-controller="Cart" asp-action="Add" asp-route-id="@item.WineID">Add to Cart</a>
								<div class="blurb">
									<div class="product-title">@Html.DisplayFor(modelItem => item.WineName)</div>
									<p>
										@Html.DisplayFor(modelItem => item.Blurb)
									</p>
								</div>
							</div>
						</li>
					}
				</ul>
			</div>
			<a class="slide-button" id="nxt"><i class="material-icons">keyboard_arrow_right</i></a>
		</div>
	</section>
}


<script src="~/js/shop.js"></script>